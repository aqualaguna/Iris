(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-659dbaf6"],{"31f4":function(e,t){e.exports=function(e,t,s){var r=void 0===s;switch(t.length){case 0:return r?e():e.call(s);case 1:return r?e(t[0]):e.call(s,t[0]);case 2:return r?e(t[0],t[1]):e.call(s,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(s,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(s,t[0],t[1],t[2],t[3])}return e.apply(s,t)}},3416:function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("vx-card",{attrs:{title:"Profile","no-shadow":""}},[s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col sm:w-1/3 w-full"},[s("span",[e._v("Name")])]),s("div",{staticClass:"vx-col sm:w-2/3 w-full"},[s("vs-input",{staticClass:"w-full",model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1)]),s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col sm:w-1/3 w-full"},[s("span",[e._v("Email")])]),s("div",{staticClass:"vx-col sm:w-2/3 w-full"},[s("vs-input",{staticClass:"w-full",attrs:{type:"email",disabled:"",value:e.user.email}})],1)]),s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col sm:w-1/3 w-full"},[s("span",[e._v("Phone Number")])]),s("div",{staticClass:"vx-col sm:w-2/3 w-full"},[s("vs-input",{staticClass:"w-full",model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1)]),s("div",{staticClass:"vx-row mb-6"},[s("div",{staticClass:"vx-col sm:w-1/3 w-full"},[s("span",[e._v("Role")])]),s("div",{staticClass:"vx-col sm:w-2/3 w-full"},[s("vSelect",{staticClass:"bg-white m-3",attrs:{disabled:e.isSuper,closeOnSelect:!1,options:e.roleOptions,dir:e.$vs.rtl?"rtl":"ltr"},model:{value:e.user.role_id,callback:function(t){e.$set(e.user,"role_id",t)},expression:"user.role_id"}})],1)]),s("div",{staticClass:"vx-row"},[s("div",{staticClass:"vx-col sm:w-2/3 w-full ml-auto"},[s("vs-button",{staticClass:"float-right mr-3 m-2",on:{click:e.saveUser,"":function(e){}}},[e._v("Submit")])],1)])]),this.user.id==e.currentUserUid?s("ChangePasssword"):e._e()],1)},a=[],n=(s("1c01"),s("58b2"),s("8e6e"),s("f3e2"),s("d25f"),s("ac6a"),s("456d"),s("7514"),s("bd86")),i=(s("6d67"),s("d92a"),s("7f7f"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("vx-card",{attrs:{title:"Change Password","no-shadow":""}},[s("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password","label-placeholder":"New Password"},model:{value:e.email.new_password,callback:function(t){e.$set(e.email,"new_password",t)},expression:"email.new_password"}}),s("vs-input",{staticClass:"w-full mb-base",attrs:{type:"password","label-placeholder":"Confirm Password"},model:{value:e.email.confirm_new_password,callback:function(t){e.$set(e.email,"confirm_new_password",t)},expression:"email.confirm_new_password"}}),s("div",{staticClass:"flex flex-wrap items-center justify-end"},[s("vs-button",{staticClass:"ml-auto mt-2",attrs:{type:"border",color:"warning"},on:{click:function(t){e.email={new_password:"",confirm_new_password:""}}}},[e._v("Reset")]),s("vs-button",{staticClass:"ml-4 mt-2",attrs:{color:"primary"},on:{click:e.changePassword}},[e._v("Save Changes")])],1)],1)],1)}),o=[],c=s("e836"),l={data:function(){return{email:{new_password:"",confirm_new_password:""},user:{}}},methods:{changePassword:function(){var e=this;this.email.new_password!=this.email.confirm_new_password?this.$vs.notify({position:"bottom-center",title:"password does not match",text:"check your input again.",color:"warning",iconPack:"feather",icon:"icon-alert-circle"}):this.firebaseUser.updatePassword(this.email.new_password).then((function(){console.log("test"),e.$vs.notify({position:"bottom-center",title:"password Updated!",text:"yout password has been updated. please remember your new password.",color:"success",iconPack:"feather",icon:"icon-check"})})).catch(c["a"].bind(this))}},computed:{app:function(){var e=this.$store.state.selectedApp;return(e?this.$app(e.projectId):null)||null},firebaseUser:function(){return this.app.auth().currentUser}}},u=l,d=s("2877"),p=Object(d["a"])(u,i,o,!1,null,null,null),f=p.exports,m=s("4a7a"),v=s.n(m);function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){Object(n["a"])(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var b={components:{ChangePasssword:f,vSelect:v.a},name:"UpdateUser",data:function(){return{user:{name:"",email:"",phone:""},roles:[],isSuper:!1}},methods:{saveUser:function(){var e=this,t=this.app.firestore().collection("iris_user").doc(this.currentUserUid),s={email:this.user.email,name:this.user.name};this.user.role_id.value!=this.$store.state.user.updateData.role_id&&(s.role_id=this.user.role_id.value),t.update(s).then((function(){e.$vs.notify({position:"bottom-center",title:"User Profile Updated!",color:"success",iconPack:"feather"}),e.$router.back()})).catch(c["a"].bind(this))}},computed:{roleOptions:function(){return this.roles.map((function(e){return{label:e.name,value:e.id}}))},app:function(){var e=this.$store.state.selectedApp;return(e?this.$app(e.projectId):null)||null},currentUser:function(){return this.app.auth().currentUser},currentUserUid:function(){return this.currentUser?this.currentUser.uid:""}},mounted:function(){var e=this;this.user=JSON.parse(JSON.stringify(this.$store.state.user.updateData)),this.user.id==this.currentUserUid||this.$can("user","update")||this.$router.push("/pages/error-unauthorized");var t=this.app.firestore(),s=t.collection("iris_role_permission");s.get().then((function(t){e.roles=t.docs.map((function(e){return h(h({},e.data()),{},{id:e.id})}));var s=e.roles.find((function(t){return t.id==e.user.role_id}));"super_admin"==e.user.role_id&&(e.isSuper=!0),s&&(e.user.role_id={label:s.name,value:s.id})})).catch(c["a"].bind(this))}},_=b,x=Object(d["a"])(_,r,a,!1,null,null,null);t["default"]=x.exports},d92a:function(e,t,s){var r=s("5ca1");r(r.P,"Function",{bind:s("f0c1")})},e836:function(e,t,s){"use strict";function r(e,t){e.code?this.$vs.notify({title:e.code,text:e.message,color:"danger",iconPack:"feather",icon:"icon-alert-circle",position:"bottom-center"}):this.$vs.notify({title:"Unexpected Error!",text:e.message,color:"danger",iconPack:"feather",icon:"icon-alert-circle",position:"bottom-center"}),console.log(e),"function"==typeof t&&t()}s.d(t,"a",(function(){return r}))},f0c1:function(e,t,s){"use strict";var r=s("d8e8"),a=s("d3f4"),n=s("31f4"),i=[].slice,o={},c=function(e,t,s){if(!(t in o)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";o[t]=Function("F,a","return new F("+r.join(",")+")")}return o[t](e,s)};e.exports=Function.bind||function(e){var t=r(this),s=i.call(arguments,1),o=function(){var r=s.concat(i.call(arguments));return this instanceof o?c(t,r.length,r):n(t,r,e)};return a(t.prototype)&&(o.prototype=t.prototype),o}}}]);
//# sourceMappingURL=chunk-659dbaf6.c1bfddcd.js.map